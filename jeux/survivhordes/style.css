/* 1. On s'assure qu'il n'y a aucune marge par défaut sur la page entière */
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    overflow: hidden; /* Empêche l'apparition de barres de défilement indésirables */
}

body {
    /* 2. On définit la couleur noire en PRIORITÉ (fond de secours si l'image ne charge pas) */
    background-color: #000;
    
    /* 3. On applique l'image de fond */
    background-image: url('images/fondecran.jpg');
    background-repeat: no-repeat;
    background-position: center center;
    
    /* 4. IMPORTANT : 'cover' force l'image à couvrir tout l'écran, même si ça déforme un peu */
    background-size: cover;

    font-family: 'Roboto', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Le cadre du jeu (Canvas + UI) */
#game-container {
    position: relative;
    width: 1000px;
    height: 700px;
    background: #111;
    box-shadow: 0 0 20px #000;
}

canvas {
    display: block;
    width: 100%;
    height: 100%;
    background: url('images/fondgame.jpg') no-repeat center center;
    background-size: cover;
    cursor: crosshair;
}

/* Footer style */
#footerText {
    position: absolute;
    bottom: -30px;
    width: 100%;
    text-align: center;
    font-size: 12px;
    color: #888;
}

/* --- UI GLOBALE --- */
.hidden { display: none !important; }

/* Overlays (Menus) */
.overlay {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 20;
}

/* Panneaux style Hordes (Fond Amelio) */
.menu-panel {
    width: 450px;
    padding: 30px;
    background: url('images/fondamelio.jpg');
    border: 2px solid #5d4037;
    box-shadow: 0 0 15px #000;
    text-align: center;
    color: #fff;
    border-radius: 4px;
    max-height: 80vh;  
    overflow-y: auto;      
}

.hordes-title {
    font-size: 28px;
    color: #fff;
    text-transform: uppercase;
    text-shadow: 2px 2px 0px #000;
    margin-top: 0;
    margin-bottom: 20px;
    border-bottom: 1px solid rgba(255,255,255,0.3);
    padding-bottom: 10px;
}

.hordes-text {
    font-size: 14px;
    color: #ddd;
    margin-bottom: 20px;
}

/* --- HUD (In-Game) --- */
#hud {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none;
}

.stat-box {
    position: absolute;
    width: 250px;
    height: 30px;
    background: rgba(0,0,0,0.6);
    border: 1px solid #777;
    display: flex;
    align-items: center;
    padding: 2px;
    border-radius: 4px; /* AJOUT : Coins arrondis */
    box-sizing: border-box; /* AJOUT : Pour gérer les bordures proprement */
}

.bar-label {
    width: 40px;
    font-weight: bold;
    font-size: 12px;
    text-align: center;
    color: #ccc;
}

.bar-border {
    flex-grow: 1;
    height: 16px;
    background: #222;
    border: 1px solid #555;
    margin: 0 5px;
    border-radius: 2px; /* AJOUT : Léger arrondi sur la jauge interne */
}

.bar-fill { height: 100%; border-radius: 2px; } /* AJOUT : Léger arrondi sur le remplissage */
.hp-fill { background: #b71c1c; }
.xp-fill { background: #33691e; }

.bar-text {
    font-size: 12px;
    color: #fff;
    margin-right: 5px;
    text-shadow: 1px 1px 0 #000;
}

#game-timer {
    position: absolute;
    top: 10px; width: 100%;
    text-align: center;
    font-size: 24px;
    font-weight: bold;
    color: #fff;
    text-shadow: 2px 2px 0 #000;
}

#kill-counter {
    position: absolute;
    bottom: 10px; right: 10px;
    font-size: 16px;
    color: #aaa;
}

/* MODIFICATION : Compteur de pièces */
#coin-hud {
    width: auto !important; /* Largeur automatique */
    min-width: 60px; /* Largeur minimum */
    padding: 2px 10px !important; /* Padding ajusté */
    display: flex;
    align-items: center;
    justify-content: center; /* Centre le contenu */
    gap: 5px; /* Espace entre l'image et le texte */
    border-radius: 4px; /* Coins arrondis */
    /* On garde le style de .stat-box hérité */
}

#spell-dock {
    position: absolute;
    bottom: 10px; left: 10px;
    display: flex;
    gap: 8px;
}

.spell-icon {
    width: 40px; height: 40px;
    border: 1px solid #aaa;
    background-size: cover;
    position: relative;
    box-shadow: 2px 2px 5px #000;
    border-radius: 4px; /* AJOUT : Coins arrondis pour les sorts */
}
.spell-lvl {
    position: absolute; top: -5px; right: -5px;
    background: #000; color: #fff;
    border: 1px solid #fff;
    font-size: 10px; padding: 1px 3px;
    border-radius: 4px; /* AJOUT : Arrondi sur le niveau */
}

/* --- BOUTONS & CARTES --- */
.choices-container {
    display: flex;
    gap: 15px;
    justify-content: center;
    flex-wrap: wrap;
}
.choices-container.vertical { flex-direction: column; align-items: center; }

.card-choice {
    width: 380px;
    height: 60px;
    background: url('images/bouton.gif');
    background-size: cover;
    display: flex;
    align-items: center;
    padding: 0 15px;
    cursor: pointer;
    border: 1px solid #000;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    transition: filter 0.2s;
    color: white;
    text-shadow: 1px 1px 0 #000;
}

.card-choice:hover {
    filter: brightness(1.2);
    border-color: #fff;
}

.card-img { width: 40px; height: 40px; margin-right: 15px; border: 1px solid #555; }
.card-info h3 { margin: 0; font-size: 16px; }
.card-info p { margin: 2px 0 0; font-size: 12px; color: #ccc; }

.hordes-btn {
    width: 150px;
    height: 40px;
    margin: 20px auto 0;
    background: url('images/bouton.gif');
    background-size: 100% 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    border: 1px solid #000;
    font-weight: bold;
    text-transform: uppercase;
}
.hordes-btn:hover { border-color: #fff; filter: brightness(1.1); }

/* Centrer les boutons verticalement dans le panneau */
.home-buttons {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    margin-top: 20px;
}

/* Groupe de boutons côte à côte */
.btn-row {
    display: flex;
    gap: 20px;
    justify-content: center;
}

/* Style pour le gros bouton Jouer */
.hordes-btn.big-btn {
    width: 220px;
    height: 60px;
    font-size: 24px;
}

/* Ligne d'option (volume) */
.option-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    color: #ddd;
}

.option-row label {
    font-weight: bold;
    flex: 1;
    text-align: left;
}

.option-row input[type=range] {
    flex: 2;
    cursor: pointer;
    accent-color: #fff;
}

.option-separator {
    border-top: 1px solid rgba(255,255,255,0.3);
    margin: 20px 0;
}

.hordes-subtitle {
    color: #fff;
    text-transform: uppercase;
    margin-bottom: 15px;
    font-size: 16px;
}

.controls-info {
    text-align: left;
    background: rgba(0,0,0,0.3);
    padding: 10px;
    border: 1px solid #555;
    margin-bottom: 20px;
    font-size: 14px;
    color: #ccc;
    border-radius: 4px;
}

.controls-info p {
    margin: 5px 0;
}

.shop-coins-display {
    background: rgba(0,0,0,0.5);
    border: 1px solid #5d4037;
    padding: 10px;
    margin-bottom: 20px;
    border-radius: 4px;
    color: #ffd700; /* Couleur or */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Style pour le contenu des boutons (image + texte) */
.btn-content {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px; /* Espace entre l'image et le texte */
    width: 100%;
    pointer-events: none; /* Pour que le clic passe à travers */
}

.btn-content img {
    width: 24px;
    height: 24px;
    object-fit: contain;
}

/* Ajustement spécifique pour le gros bouton Jouer */
.hordes-btn.big-btn .btn-content img {
    width: 24px;
    height: 24px;
}

/* --- Page Votre Ame --- */
#soul-menu .menu-panel {
    width: 600px; /* Plus large pour les stats */
    max-height: 80vh;
    overflow-y: auto;
}

.history-container {
    margin-top: 15px;
    display: flex;
    flex-direction: column;
    gap: 8px; /* Espace réduit entre les entrées */
}

/* Nouvelle grille compacte : 5 colonnes */
.history-entry {
    background: rgba(0,0,0,0.3);
    border: 1px solid #5d4037;
    padding: 8px;
    border-radius: 4px;
    display: grid;
    grid-template-columns: 100px 50px 50px 50px 1fr; /* Temps | Niv | Kills | Boss | Date */
    align-items: center;
    gap: 10px;
    text-align: center;
    font-size: 12px;
    color: #ccc;
}

.history-entry.best {
    border: 2px solid #ffd700;
    background: rgba(255, 215, 0, 0.1);
    color: #fff;
    order: -1; /* Force la meilleure partie en haut via Flexbox sur le container */
}

/* Labels uniquement pour la première ligne ou pour tous si nécessaire, ici on simplifie sans labels textuels pour gagner de la place */
.history-entry .stat-label { 
    display: none; /* On cache les labels "Temps", "Niveau" etc pour compacté */
}
.history-entry .stat-value { 
    font-weight: bold; 
    font-size: 14px; 
}

/* Icônes ou titres spécifiques si besoin */
.history-entry .col-header {
    font-size: 10px;
    color: #888;
    display: block;
}

.stats-summary {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid #5d4037;
    display: flex;
    justify-content: space-around;
    text-align: center;
}

.summary-item h4 { margin: 0; color: #ffd700; font-size: 14px; }
.summary-item p { margin: 5px 0 0; font-size: 20px; font-weight: bold; }

/* Bouton Options en jeu (Haut droit sous l'EXP) */
.options-btn {
    /* Positionnement : collé sous la barre d'EXP (top:10px + hauteur ~36px + petit espace) */
    position: absolute;
    top: 30px; 
    right: 20px;
    
    /* Dimensions et Forme */
    width: 36px;
    height: 36px;
    padding: 0;
    border-radius: 4px; /* Légèrement arrondi comme les barres */
    
    /* Style visuel (copié de .stat-box / bar-border) */
    background: rgba(0,0,0,0.6); /* Fond noir transparent */
    border: 1px solid #777;      /* Bordure grise */
    
    /* Centrage de l'image interne */
    display: flex;
    justify-content: center;
    align-items: center;
    
    /* Interaction et superposition */
    z-index: 10;
    pointer-events: auto;
    cursor: pointer;
    box-sizing: border-box; /* Important pour gérer les bordures */
}

/* Style de l'image à l'intérieur */
.options-btn img {
    /* Prend toute la largeur moins 4px (2px de bordure * 2) -> laisse 2px de chaque côté */
    width: calc(100% - 4px);
    height: calc(100% - 4px);
    object-fit: contain; /* Garde les proportions de l'image */
    opacity: 0.8;        /* Légèrement transparent par défaut */
    transition: opacity 0.2s;
}

/* Effet au survol de la souris */
.options-btn:hover {
    border-color: #fff;  /* Bordure blanche au survol */
}

.options-btn:hover img {
    opacity: 1; /* Image bien visible au survol */
}

/* Ajustement des boutons côte à côte dans le menu pause */
#pause-menu .btn-row {
    display: flex;
    gap: 20px;
    justify-content: center;
    margin-top: 20px;
}

/* Style pour le bouton reset */
#btn-reset-data {
    background: #442222; /* Rouge foncé */
}
#btn-reset-data:hover {
    background: #663333;
    border-color: #ff4444;
}

/* --- Style Boutique (VERSION GRILLE/CARTES) --- */

/* Conteneur : Grille de 2 colonnes */
#shop-menu .shop-items {
    margin-top: 20px;
    display: grid; /* On utilise Grid au lieu de flex */
    grid-template-columns: 1fr 1fr; /* 2 colonnes égales */
    gap: 20px; /* Espacement entre les cartes */
}

/* L'objet devient une "Carte" verticale */
#shop-menu .shop-item {
    background: rgba(0, 0, 0, 0.5); /* Fond semi-transparent */
    border: 2px solid #5d4037; /* Bordure "bois" */
    border-radius: 8px; /* Coins arrondis style carte */
    padding: 15px;
    
    /* Flexbox interne pour aligner verticalement */
    display: flex;
    flex-direction: column; 
    align-items: center; /* Tout centré horizontalement */
    justify-content: space-between; /* Espace bien réparti */
    
    cursor: pointer;
    transition: all 0.2s ease;
    min-height: 180px; /* Hauteur minimale pour l'harmonie */
}

/* Effet au survol : La carte "lévite" légèrement */
#shop-menu .shop-item:hover {
    background: rgba(40, 20, 10, 0.8); /* Fond légèrement rouge/marron au survol */
    border-color: #ffd700; /* Bordure dorée */
    transform: translateY(-5px); /* Remonte de 5px */
    box-shadow: 0 5px 15px rgba(0,0,0,0.5); /* Ombre portée */
}

/* État "MAX" / Désactivé */
#shop-menu .shop-item.disabled {
    opacity: 0.6;
    filter: grayscale(0.8); /* Image en noir et blanc */
    border-color: #555;
    cursor: not-allowed;
}
#shop-menu .shop-item.disabled:hover {
    transform: none; /* Pas d'animation si désactivé */
}

/* Icône plus grande et centrée */
#shop-menu .shop-icon {
    font-size: 24px;
    margin-bottom: 10px;
    width: 100%;
    text-align: center;
}
#shop-menu .shop-icon img {
    width: 64px; /* Images plus grandes (64x64) */
    height: 64px;
    object-fit: contain;
    filter: drop-shadow(0 0 5px rgba(0,0,0,0.5)); /* Ombre derrière l'icône */
}

/* Informations centrées */
#shop-menu .shop-info {
    text-align: center;
    width: 100%; /* Prend toute la largeur */
    margin-bottom: 10px;
}

#shop-menu .shop-info h4 {
    margin: 0 0 5px;
    color: #fff;
    font-size: 15px;
    text-transform: uppercase;
}

#shop-menu .shop-info p {
    margin: 0;
    color: #ccc;
    font-size: 12px;
}

#shop-menu .shop-info small {
    color: #888;
    font-size: 10px;
    display: block;
    margin-top: 5px;
}

/* Le prix en bas de la carte */
#shop-menu .shop-action {
    margin-top: auto; /* Pousse le prix tout en bas de la carte */
    background: rgba(80, 60, 40, 0.6); /* Fond marron foncé */
    border: 1px solid #5d4037;
    padding: 8px 0;
    border-radius: 20px; /* Forme de pilule/étiquette */
    font-weight: bold;
    color: #ffd700; /* Or */
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
    width: 100%; /* Prend toute la largeur */
    box-sizing: border-box; /* Important pour le padding */
}

/* --- Style Game Over --- */
.gameover-panel {
    width: 400px;
}

.gameover-stats {
    margin-top: 20px;
    background: rgba(0,0,0,0.4);
    border: 1px solid #5d4037;
    padding: 15px;
    border-radius: 4px;
}

.stat-row {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

.stat-row:last-child {
    border-bottom: none;
}

.stat-label {
    color: #aaa;
    font-size: 14px;
}

.stat-value {
    color: #fff;
    font-weight: bold;
    font-size: 14px;
}

/* --- Style Page Changelog --- */
.changelog-link {
    display: block;
    margin-top: 15px;
    color: #888;
    text-decoration: none;
    font-size: 12px;
    transition: color 0.2s;
}

.changelog-link:hover {
    color: #fff;
    text-decoration: underline;
}

.changelog-entry {
    text-align: left;
    margin-bottom: 25px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    padding-bottom: 15px;
}

.changelog-entry:last-child {
    border-bottom: none;
}

.changelog-version {
    font-size: 16px;
    color: #ffd700; /* Couleur or pour les titres de version */
    margin: 0 0 5px 0;
    text-transform: uppercase;
}

.changelog-desc {
    font-size: 12px;
    color: #bbb;
    margin-bottom: 15px;
    font-style: italic;
}

.changelog-section {
    margin-bottom: 10px;
}

.changelog-section h4 {
    font-size: 14px;
    color: #fff;
    margin: 0 0 5px 0;
    border-left: 3px solid #5d4037;
    padding-left: 8px;
}

.changelog-section ul {
    margin: 0;
    padding-left: 25px;
    list-style-type: disc;
}

.changelog-section li {
    font-size: 13px;
    color: #ddd;
    margin-bottom: 4px;
}

/* Logo ToncPlay (FIXED en haut à gauche de la fenêtre) */
#toncplay-logo { 
    position: fixed; 
    top: 10px; 
    left: 10px; 
    z-index: 1000; 
}
#toncplay-logo img { width: 50px; }